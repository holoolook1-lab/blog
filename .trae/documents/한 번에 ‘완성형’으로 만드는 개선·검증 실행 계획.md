## 목표
- 반복 수정 없이 즉시 운영 가능한 ‘완성형’ 품질로 경량 하드닝과 검증을 일괄 적용
- 성능/SEO/보안/접근성/콘텐츠 품질/운영성까지 균형 있게 상향

## 핵심 산출물
- 일관된 ISR/캐싱 정책과 태그 기반 무효화
- 구조화 데이터(JSON‑LD)·canonical·피드 정돈으로 검색/공유 안정화
- 최소 보안 헤더+CSP(점진)·레이트리밋 확장
- a11y 시맨틱/포커스/모달 트랩 표준화
- 이미지 사이즈/업로드 정책 정돈
- 오류 처리/운영 체크리스트 및 Lighthouse 보고서

## 구현 항목
### 성능/캐싱
- 홈 `fetch` 옵션 충돌 정리(`src/app/page.tsx:34`) → ISR(60s)만 사용
- 태그 기반 무효화 도입
  - 읽기: `fetch(..., { next: { tags: ['posts'] } })`
  - 쓰기: `revalidateTag('posts')`로 정밀 무효화(`src/app/api/posts/route.ts`)
- 인기 조회 캐싱: Supabase 읽기 쿼리를 `unstable_cache` 래핑(목록/상세)
- 재검증 주기 튜닝: 상세 300–600s, 피드/사이트맵 900–3600s

### SEO/프리뷰
- 레이아웃에 `Organization/WebSite` JSON‑LD 추가(`src/app/layout.tsx`)
- 정적 정보 페이지 canonical 설정(`src/app/terms/page.tsx`, `src/app/privacy/page.tsx`)
- OG/Twitter 기본 이미지/커버 분기 일관성 재점검(`src/app/layout.tsx`, `src/app/(blog)/posts/[slug]/page.tsx`)
- RSS/Atom 필드 포맷 정돈(작성자/카테고리/갱신 시각)

### 보안/레이트리밋/CSP
- 최소 보안 헤더 추가(`blog/middleware.ts:18–22`)
  - `X-Content-Type-Options`, `Referrer-Policy`, `X-Frame-Options`, `Permissions-Policy`
- 레이트리밋 확대: `/api/auth/*`, 업로드/투표/북마크 등 변이 라우트
- CSP 점진 도입(화이트리스트 작성: Supabase Storage, YouTube/Vimeo/NaverTV 등 임베드 도메인)

### 접근성/UX
- 목록 시맨틱을 `ul/li`로 교체(`src/app/(blog)/posts/page.tsx:157–163`)
- 포커스 스타일 통일(`focus:outline-none` 정리, 전역 `:focus-visible` 유지)
- 모달 포커스 트랩 유틸 표준화(ESC/탭 루프/원포커스 복귀)
- 검색 키보드 숏컷 힌트/핸들러 일관화(`PostsSearch.tsx`)

### 이미지 전략
- 목록/상세 `sizes` 프리셋 일관화(`src/lib/utils/image.ts:27–31`)
- LCP 후보만 `priority` 유지, 나머지 레이지 로딩
- 업로드 정책 유지(WebP/<=2048px/품질≈82), 썸네일/미니 썸네일 규칙 명시

### 콘텐츠/에디터
- `sanitizeHtml` 허용 태그/속성 보강(보안·표현력 균형)
- 발췌 생성/임베드 처리 일관화(유튜브/비메오/NaverTV 등 자동 파라미터는 상세에 한정)

### 오류 처리/내결함성
- 페이지/라우트 그룹에 `error.tsx` 도입으로 사용자 친화적 오류 화면
- API 오류 응답 포맷 통일(JSON·메시지·코드)

### 운영/검증
- 환경변수 점검: `NEXT_PUBLIC_SITE_URL`, Supabase 키, KV, 메일 키
- Lighthouse(Performance/SEO/Accessibility/Best Practices) 측정 및 리그레션 체크리스트
- OG/Twitter 카드 미리보기(커버 유무)·`/sitemap.xml`/`/robots.txt`/RSS/Atom 응답 확인

## 단계별 진행
1) 빠른 하드닝: 캐싱 일관화, 보안 헤더, 목록 시맨틱, JSON‑LD/Canonical, 이미지 LCP 정책
2) 캐싱/무효화 정교화: 태그 기반 무효화, `unstable_cache` 적용, 재검증 주기 조정
3) SEO/콘텐츠: 피드 필드 정돈, `sanitizeHtml` 정책 조정
4) 보안/접근성: 레이트리밋 확대, 포커스/모달 트랩, CSP 점진 적용
5) 오류 처리/검증: `error.tsx`, API 에러 포맷, Lighthouse·카드·사이트맵 검증

## 검증·수용 기준
- Lighthouse 90+ (Perf/SEO/Accessibility)
- 홈/목록/상세 재검증·무효화 정상, DB 조회 부하 감소 확인
- 카드 미리보기/구조화 데이터/피드·사이트맵 유효성 통과
- 보안 헤더 반영 및 민감 API 레이트리밋 동작 확인
- 키보드 내비게이션·모달 포커스 정상

## 예상 변경 파일
- `src/app/page.tsx`, `src/app/(blog)/posts/page.tsx`, `src/app/(blog)/posts/[slug]/page.tsx`
- `src/app/layout.tsx`, `src/app/terms/page.tsx`, `src/app/privacy/page.tsx`
- `blog/middleware.ts`
- `src/lib/utils/image.ts`, `src/lib/utils/sanitize.ts`
- 라우트 그룹 `error.tsx`(신규)

## 전제/리스크
- CSP는 외부 임베드 도메인 화이트리스트 정비 필요
- KV/Supabase/메일 키 누락 시 일부 기능 비활성화 가능
- `NEXT_PUBLIC_SITE_URL` 정확 설정이 메타/콜백/사이트맵에 필수

승인되면 위 순서로 일괄 적용·검증해 ‘완성형’ 기준을 충족시키겠습니다.